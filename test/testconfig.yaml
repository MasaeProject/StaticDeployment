- name: test1-2
  projects:
    - name: p1
      source: test/data/test-project1/index.html
      replace:
        - name: en
          prerun:
            default:
              - - $CP
                - $SRC
                - test/out/$JOBNAME/$PROJECT/$SRCFILE
        - name: zh
          prerun:
            default:
              - - $BAK
          replace:
            - old: Welcome!
              new: 欢迎!
              num: 1
            - old: Kagurazaka Yashi
              new: 神楽坂雅詩
              num: -1
          run:
            default:
              - - $CP
                - test/out/$JOBNAME/$PROJECT/$SRCFILE
              - - $RES
        - name: ja
          prerun:
            default:
              - - $BAK
          replace:
            - old: Welcome!
              new: ようこそ!
              num: 1
            - old: Kagurazaka Yashi
              new: かぐらざか みやび
              num: -1
          run:
            default:
              - - $CP
                - test/out/$JOBNAME/$PROJECT/$SRCFILE
              - - $RES
    - name: p2
      source: test/data/test-project2/index.ts
      replace:
        - name: en
          prerun:
            default:
              - - $BAK
          replace:
            - old: red
              new: orange
              num: 1
            - old: "Hello, World!"
              new: Welcome!
              num: 1
          run:
            default:
              - - tsc
                - $SRC
              - - $MV
                - $SRCDIR/$SRCNAME.js
                - test/out/$JOBNAME/$PROJECT/index.js
              - - $CP
                - $SRCDIR/index.html
                - test/out/$JOBNAME/$PROJECT/index.html
              - - $RES
        - name: zh
          prerun:
            default:
              - - $BAK
          replace:
            - old: red
              new: orange
              num: 1
            - old: "Hello, World!"
              new: 欢迎!
              num: 1
          run:
            default:
              - - tsc
                - $SRC
              - - $MV
                - $SRCDIR/$SRCNAME.js
                - test/out/$JOBNAME/$PROJECT/index.js
              - - $CP
                - $SRCDIR/index.html
                - test/out/$JOBNAME/$PROJECT/index.html
              - - $RES
        - name: ja
          prerun:
            default:
              - - $BAK
          replace:
            - old: red
              new: orange
              num: 1
            - old: "Hello, World!"
              new: ようこそ!
              num: 1
          run:
            default:
              - - tsc
                - $SRC
              - - $MV
                - $SRCDIR/$SRCNAME.js
                - test/out/$JOBNAME/$PROJECT/index.js
              - - $CP
                - $SRCDIR/index.html
                - test/out/$JOBNAME/$PROJECT/index.html
              - - $RES
